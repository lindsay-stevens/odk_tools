# ODK Tools GUI User Guide


## Introduction
This document is for Windows users that are responsible for designing ODK Collect forms, and describes how to use the tool suite GUI for generating the necessary files for ODK form deployment.


## Interface
The interface is divided into the following 5 segments. Further details about each task are in the following sections of this document.

- Generate XForm: convert an XForm from an XLSForm
- Validate XForm: check if an XForm is valid
- Generate Images: create images for each question in an XLSForm
- Generate Editions: prepare site-specific language editions of an XForm
- Last run output: messages about the outcome of the most recently run task

General notes:

- Inputs for each task appear above the "Run" button for the task
- Paths can be pasted into the field, or selected with the "Browse" button
- Required parameters are prefixed with a star "*"
- If the Generate XForms task is run successfully, the input XLSForm path and generated XForm path will be copied down into the input fields for the other tasks

Example input files for each task are provided in the "examples" folder. The Generate Editions task requires an XForm, which can be created by first running the Generate XForm task.


## Generate XForm
Reads a XLSForm XLSX spreadsheet, and generates an XForm XML file which is used by ODK Collect.

Parameters:

- XLSForm path: required. The XForm will be created in the same location as the XLSForm, with the same name, except it will have a ".XML" file extension instead of ".XLSX"

If the XForm was successfully generated, there may be some warning messages shown. In general, these issues would not stop the XForm from working in ODK Collect, but should be resolved if possible.


## Validate XForm
Reads an XForm XML file and simulates loading the file in ODK Collect to check if the XForm is valid.

Parameters:

- XForm path: required.
- Java path: optional. If not specified, the location of Java will be determined using the JAVA_HOME system environment variable. A typical location for Java to be installed on a Windows system is "C:\\Program Files\\Java\\jre7\\bin\\java.exe".
- ODK_Validate path: optional. A copy of the ODK Validate library is packaged with this application. If a different version should be used, specify the path to it.
 
Error messages dis

In general, warning messages generated by this task must be resolved for the XForm to work properly in ODK Collect.


## Generate Images
Reads extended information from an XLSForm to generate .png files for each question and each language.

Parameters:

- XLSForm path: required. Must have the extended information described in the "XLSForm Images Spec" document.

Warnings generated by this may relate to layout issues, for example if the font is too large it may result in text wider than the base image size. If there are logo or nested images referred to in the XLSForm which could not be located, an error and the name of the file will be displayed.


## Generate Editions
Reads a spreadsheet specifying which languages each study site requires, and generates a zip file with just those languages included. 

Can optionally include a "collect.settings" file which configures ODK Collect automatically, and can nest the output folder structure so it can be unpacked easily on a tablet. 

Additionally, if an item named "SID" is found in the XForm, the site code
will be appended to the default value (e.g. "1309-" becomes "1309-61221-").

Parameters:

- XForm path: required. If an item named "SID" (short for "Subject ID") is found in the XForm, the site code will be appended to the default value (e.g. "1309-" becomes "1309-61221-") for the convenience of users.
- Site Languages path: required. Notes on the structure are below.
- Collect Settings path: optional. If specified, the selected file will be copied into the archive under "odk/", e.g. "odk/collect.settings".
- Nest output: optional. If ticked, the files will be nested in the zip archive, for example "odk/forms/MY_FORM-media" vs. simply "MY_FORM-media".

Messages generated by this process indicate for each site which language is being processed for them and whether the SID element was edited.


### Media Folder
It is assumed that in the XForm's media folder is in same location as the XForm, and has the same name. For example, XForm: "My_XForm.xml" and media: "My_XForm-media". The media folder should contain images, audio or video that are displayed in the form. The Generate Images task creates and stores images in this folder.


### Site Languages
The "Site Languages" sheet is assumed to have the following structure. In the first sheet, first column, from row 2 onwards, the language names for each site separated by a forward slash, e.g. "English/Spanish/German". 

In the first sheet, third column, from row 2 onwards, the site code for each site, e.g.
"61221". The specified languages must match the language names used in the XLSForm.

### Optional Options
The options "collect settings" and "nest output" are intended to simplify the complete replacement (or fresh setup) of an ODK forms deployment on an Android device. 

By replicating the app storage organisation, users can take the produced zip file, put it in the root storage folder and unzip it without having to launch ODK or create folders. The "collect settings" can be used independently of the "nest output" option.
